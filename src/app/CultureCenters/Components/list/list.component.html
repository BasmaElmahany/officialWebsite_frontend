<div class="center-table-wrapper">
  <div class="table-header" [class.rtl]="i18n.isRTL">
    <h2 class="page-title">
      {{ i18n.currentLang === 'ar' ? 'المراكز الثقافية' : 'Culture Centers' }}
    </h2>

    <div class="header-actions">
      <mat-form-field appearance="fill" class="search-field">
        <mat-icon matPrefix>search</mat-icon>
        <input matInput type="text" (keyup)="applyFilter($event)" 
               [placeholder]="i18n.currentLang === 'ar' ? 'بحث عن مركز ثقافي' : 'Search Culture Center'">
      </mat-form-field>

      <button mat-raised-button color="primary" class="add-btn" (click)="goToCreate()">
        <mat-icon>add</mat-icon>
        <span>{{ i18n.currentLang === 'ar' ? 'إضافة مركز ثقافي' : 'Add Culture Center' }}</span>
      </button>
    </div>
  </div>

  <div class="skeleton" *ngIf="loading">
    <div class="row" *ngFor="let _ of [1,2,3,4]"></div>
  </div>

  <div class="table-scroll" *ngIf="!loading">
    <table mat-table matSort [dataSource]="dataSource" class="center-table">

      <ng-container matColumnDef="icon">
        <th mat-header-cell *matHeaderCellDef></th>
        <td mat-cell *matCellDef="let center">
          <mat-icon class="location-icon">schema</mat-icon>
        </td>
      </ng-container>

      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          {{ i18n.currentLang === 'ar' ? 'اسم المركز الثقافي' : 'Name' }}
        </th>
        <td mat-cell *matCellDef="let center" class="name-cell">
          <span class="name-text">{{ getDisplayName(center) }}</span>
        </td>
      </ng-container>

      <ng-container matColumnDef="managerName">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          {{ i18n.currentLang === 'ar' ? 'اسم المدير' : 'Manager' }}
        </th>
        <td mat-cell *matCellDef="let center" class="manager-cell">
          <span class="manager-text">{{ getDisplayManager(center) }}</span>
        </td>
      </ng-container>

      <ng-container matColumnDef="phoneNumber">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          {{ i18n.currentLang === 'ar' ? 'رقم التليفون' : 'Phone' }}
        </th>
        <td mat-cell *matCellDef="let center" class="phone-cell">
          <span class="phone-text">{{ getPhoneNumber(center) }}</span>
        </td>
      </ng-container>

      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef>
          {{ i18n.currentLang === 'ar' ? 'إجراءات' : 'Actions' }}
        </th>
        <td mat-cell *matCellDef="let center" class="actions-cell">
          <button mat-icon-button [matMenuTriggerFor]="actionsMenu" (click)="$event.stopPropagation()">
            <mat-icon>more_vert</mat-icon>
          </button>
          <mat-menu #actionsMenu="matMenu">
            <button mat-menu-item (click)="openEdit(center)">
              <mat-icon color="primary">edit</mat-icon>
              <span>{{ i18n.currentLang === 'ar' ? 'تعديل' : 'Edit' }}</span>
            </button>
            <button mat-menu-item (click)="openDetails(center)">
              <mat-icon color="accent">info</mat-icon>
              <span>{{ i18n.currentLang === 'ar' ? 'تفاصيل' : 'Details' }}</span>
            </button>
            <button mat-menu-item (click)="openDelete(center)">
              <mat-icon color="warn">delete</mat-icon>
              <span>{{ i18n.currentLang === 'ar' ? 'حذف' : 'Delete' }}</span>
            </button>
          </mat-menu>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns" class="clickable-row"></tr>
    </table>
  </div>

  <mat-paginator [pageSize]="5" [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>
</div>