      <!-- Ended Column -->

      <!-- ...existing code... -->
   
      <ng-container matColumnDef="isEnded">
        <th mat-header-cell *matHeaderCellDef>{{ i18n.currentLang === 'ar' ? 'انتهى' : 'Ended' }}</th>
        <td mat-cell *matCellDef="let leader">
          <span>
            {{ leader.isEnded ? (i18n.currentLang === 'ar' ? 'نعم' : 'Yes') : (i18n.currentLang === 'ar' ? 'لا' : 'No') }}
          </span>
        </td>
      </ng-container>
<div class="leader-table-wrapper">
  <!-- ================= Header ================= -->
  <div class="table-header" [class.rtl]="i18n.currentLang === 'ar'">
    <h2 class="page-title">
      {{ i18n.currentLang === 'ar' ? 'القيادات' : 'Leaders' }}
    </h2>
    <div class="header-actions">
      <mat-form-field appearance="fill" class="search-field">
        <mat-icon matPrefix>search</mat-icon>
        <input matInput type="text" (keyup)="applyFilter($event)" [placeholder]="i18n.currentLang === 'ar' ? 'ابحث عن قيادة' : 'Search leader'">
      </mat-form-field>
      <button mat-raised-button color="primary" class="add-btn" (click)="goToCreate()">
        <mat-icon>add</mat-icon>
        <span>{{ i18n.currentLang === 'ar' ? 'إضافة قيادة' : 'Add Leader' }}</span>
      </button>
    </div>
  </div>

  <!-- ================= Skeleton Loader ================= -->
  <div class="skeleton" *ngIf="loading">
    <div class="row" *ngFor="let _ of [1,2,3,4]"></div>
  </div>

  <!-- ================= Table ================= -->
  <div class="table-scroll" *ngIf="!loading">
    <table mat-table matSort [dataSource]="dataSource" class="leader-table">



      <!-- Name Column (first) -->
      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>{{ i18n.currentLang === 'ar' ? 'اسم القيادة' : 'Leader Name' }}</th>
        <td mat-cell *matCellDef="let leader" class="name-cell">
          <span class="name-text">{{ i18n.currentLang === 'ar' ? leader.nameAr : leader.nameEn }}</span>
        </td>
      </ng-container>

      <!-- Photo Column (second) -->
      <ng-container matColumnDef="photo">
        <th mat-header-cell *matHeaderCellDef>{{ i18n.currentLang === 'ar' ? 'الصورة' : 'Photo' }}</th>
        <td mat-cell *matCellDef="let leader">
          <img  *ngIf="leader.photoUrl" [src]="leader.photoUrl.startsWith('http') ? leader.photoUrl : 'https://shusha.minya.gov.eg:93' + leader.photoUrl" alt="صورة القيادة" class="leader-photo-thumb" />
          <mat-icon *ngIf="!leader.photoUrl" class="person-icon">person</mat-icon>
        </td>
      </ng-container>

      <!-- Position Column -->
      <ng-container matColumnDef="position">
        <th mat-header-cell *matHeaderCellDef>{{ i18n.currentLang === 'ar' ? 'المنصب' : 'Position' }}</th>
        <td mat-cell *matCellDef="let leader">
          <span>{{ i18n.currentLang === 'ar' ? leader.positionAr : leader.positionEn }}</span>
        </td>
      </ng-container>

      <!-- Ended Column -->
      <ng-container matColumnDef="isEnded">
        <th mat-header-cell *matHeaderCellDef>{{ i18n.currentLang === 'ar' ? 'انتهى' : 'Ended' }}</th>
        <td mat-cell *matCellDef="let leader">
          <span>
            {{ leader.isEnded ? (i18n.currentLang === 'ar' ? 'نعم' : 'Yes') : (i18n.currentLang === 'ar' ? 'لا' : 'No') }}
          </span>
        </td>
      </ng-container>

      <!-- Actions Column -->
      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef>{{ i18n.currentLang === 'ar' ? 'إجراءات' : 'Actions' }}</th>
        <td mat-cell *matCellDef="let leader" class="actions-cell">
          <div class="actions-wrapper">
            <button mat-icon-button class="more-btn" [matMenuTriggerFor]="actionsMenu" (click)="$event.stopPropagation()">
              <mat-icon>more_vert</mat-icon>
            </button>
            <mat-menu #actionsMenu="matMenu" class="actions-menu" [class.rtl-menu]="i18n.currentLang === 'ar'">
              <ng-container *ngIf="i18n.currentLang === 'ar'; else ltrMenu">
                <button mat-menu-item (click)="openEdit(leader); $event.stopPropagation()">
                  <mat-icon class="edit-icon">edit</mat-icon>
                  <span>تعديل</span>
                </button>
                <button mat-menu-item (click)="openDetails(leader); $event.stopPropagation()">
                  <mat-icon class="details-icon">info</mat-icon>
                  <span>تفاصيل</span>
                </button>
                <button mat-menu-item (click)="openDelete(leader); $event.stopPropagation()">
                  <mat-icon class="delete-icon">delete</mat-icon>
                  <span>حذف</span>
                </button>
              </ng-container>
              <ng-template #ltrMenu>
                <button mat-menu-item (click)="openEdit(leader); $event.stopPropagation()">
                  <mat-icon class="edit-icon">edit</mat-icon>
                  <span>Edit</span>
                </button>
                <button mat-menu-item (click)="openDetails(leader); $event.stopPropagation()">
                  <mat-icon class="details-icon">info</mat-icon>
                  <span>Details</span>
                </button>
                <button mat-menu-item (click)="openDelete(leader); $event.stopPropagation()">
                  <mat-icon class="delete-icon">delete</mat-icon>
                  <span>Delete</span>
                </button>
              </ng-template>
            </mat-menu>
          </div>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns" class="clickable-row"></tr>
    </table>
  </div>

  <!-- ================= Footer ================= -->
  <mat-paginator [pageSize]="5" [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons>
  </mat-paginator>

  <ng-template #noLeaders>
    <p>{{ i18n.currentLang === 'ar' ? 'لا يوجد قيادات' : 'No leaders found.' }}</p>
  </ng-template>
</div>
