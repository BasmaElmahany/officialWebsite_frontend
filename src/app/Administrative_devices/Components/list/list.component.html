<div class="center-table-wrapper">
	<div class="table-header" [class.rtl]="i18n.isRTL">
		<h2 class="page-title">
			{{ i18n.currentLang === 'ar' ? 'الأجهزة الإدارية' : 'Administrative Devices' }}
		</h2>
		<div class="header-actions">
			<mat-form-field appearance="fill" class="search-field">
				<mat-icon matPrefix>search</mat-icon>
				<input matInput type="text" (keyup)="applyFilter($event)"
							 [placeholder]="i18n.currentLang === 'ar' ? 'بحث عن جهاز إداري' : 'Search Device'">
			</mat-form-field>
			<button mat-raised-button color="primary" class="add-btn" (click)="goToCreate()">
				<mat-icon>add</mat-icon>
				<span>{{ i18n.currentLang === 'ar' ? 'إضافة جهاز إداري' : 'Add Device' }}</span>
			</button>
		</div>
	</div>
	<div class="skeleton" *ngIf="loading">
		<div class="row" *ngFor="let _ of [1,2,3,4]"></div>
	</div>
	<div class="table-scroll" *ngIf="!loading">
		<table mat-table matSort [dataSource]="dataSource" class="center-table">
			<ng-container matColumnDef="icon">
				<th mat-header-cell *matHeaderCellDef></th>
				<td mat-cell *matCellDef="let device">
					<mat-icon class="location-icon">devices_other</mat-icon>
				</td>
			</ng-container>
			<ng-container matColumnDef="name">
				<th mat-header-cell *matHeaderCellDef mat-sort-header>
					{{ i18n.currentLang === 'ar' ? 'اسم الجهاز' : 'Name' }}
				</th>
				<td mat-cell *matCellDef="let device" class="name-cell">
					<span class="name-text">{{ getDisplayName(device) }}</span>
				</td>
			</ng-container>
			<ng-container matColumnDef="serialNumber">
				<th mat-header-cell *matHeaderCellDef mat-sort-header>
					{{ i18n.currentLang === 'ar' ? 'الرقم التسلسلي' : 'Serial Number' }}
				</th>
				<td mat-cell *matCellDef="let device">
					{{ device.serialNumber || '—' }}
				</td>
			</ng-container>
			<ng-container matColumnDef="type">
				<th mat-header-cell *matHeaderCellDef mat-sort-header>
					{{ i18n.currentLang === 'ar' ? 'النوع' : 'Type' }}
				</th>
				<td mat-cell *matCellDef="let device">
					{{ device.type || '—' }}
				</td>
			</ng-container>
			<ng-container matColumnDef="status">
				<th mat-header-cell *matHeaderCellDef mat-sort-header>
					{{ i18n.currentLang === 'ar' ? 'الحالة' : 'Status' }}
				</th>
				<td mat-cell *matCellDef="let device">
					{{ device.status || '—' }}
				</td>
			</ng-container>
			<ng-container matColumnDef="location">
				<th mat-header-cell *matHeaderCellDef mat-sort-header>
					{{ i18n.currentLang === 'ar' ? 'الموقع' : 'Location' }}
				</th>
				<td mat-cell *matCellDef="let device">
					{{ device.location || '—' }}
				</td>
			</ng-container>
			<ng-container matColumnDef="actions">
				<th mat-header-cell *matHeaderCellDef>
					{{ i18n.currentLang === 'ar' ? 'إجراءات' : 'Actions' }}
				</th>
				<td mat-cell *matCellDef="let device" class="actions-cell">
					<button mat-icon-button [matMenuTriggerFor]="actionsMenu" (click)="$event.stopPropagation()">
						<mat-icon>more_vert</mat-icon>
					</button>
					<mat-menu #actionsMenu="matMenu">
						<button mat-menu-item (click)="openEdit(device)">
							<mat-icon color="primary">edit</mat-icon>
							<span>{{ i18n.currentLang === 'ar' ? 'تعديل' : 'Edit' }}</span>
						</button>
						<button mat-menu-item (click)="openDetails(device)">
							<mat-icon color="accent">info</mat-icon>
							<span>{{ i18n.currentLang === 'ar' ? 'تفاصيل' : 'Details' }}</span>
						</button>
						<button mat-menu-item (click)="openDelete(device)">
							<mat-icon color="warn">delete</mat-icon>
							<span>{{ i18n.currentLang === 'ar' ? 'حذف' : 'Delete' }}</span>
						</button>
					</mat-menu>
				</td>
			</ng-container>
			<tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
			<tr mat-row *matRowDef="let row; columns: displayedColumns" class="clickable-row"></tr>
		</table>
	</div>
	<mat-paginator [pageSize]="5" [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>
</div>
