<div class="center-table-wrapper">

    <!-- ================= Header ================= -->
    <div class="table-header" [class.rtl]="i18n.isRTL">

        <h2 class="page-title">
            {{ 'MENU.CENTERS' | translate | async }}
        </h2>

        <div class="header-actions">

            <!-- Search -->
            <mat-form-field appearance="fill" class="search-field">
                <mat-icon matPrefix>search</mat-icon>
                <input matInput type="text" (keyup)="applyFilter($event)" [placeholder]="i18n.currentLang === 'ar'
            ? 'بحث عن مركز'
            : 'Search center'">
            </mat-form-field>

            <!-- Add Center Button -->
            <button mat-raised-button color="primary" class="add-btn" (click)="goToCreate()">

                <mat-icon>add</mat-icon>
                <span>
                    {{ i18n.currentLang === 'ar'
                    ? 'إضافة مركز'
                    : 'Add Center' }}
                </span>

            </button>

        </div>
    </div>

    <!-- ================= Skeleton Loader ================= -->
    <div class="skeleton" *ngIf="loading">
        <div class="row" *ngFor="let _ of [1,2,3,4]"></div>
    </div>

    <!-- ================= Table ================= -->
    <table mat-table matSort [dataSource]="dataSource" class="center-table" *ngIf="!loading">

        <!-- Icon Column -->
        <ng-container matColumnDef="icon">
            <th mat-header-cell *matHeaderCellDef></th>
            <td mat-cell *matCellDef="let center">
                <mat-icon class="location-icon">location_on</mat-icon>
            </td>
        </ng-container>

        <!-- Name Column -->
        <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
                {{ i18n.currentLang === 'ar' ? 'اسم المركز' : 'Center Name' }}
            </th>
            <td mat-cell *matCellDef="let center">
                {{ getCenterName(center) }}
            </td>
        </ng-container>
        <!-- Actions Column -->
        <ng-container matColumnDef="actions">
            <th mat-header-cell *matHeaderCellDef>
                {{ i18n.currentLang === 'ar' ? 'إجراءات' : 'Actions' }}
            </th>

            <td mat-cell *matCellDef="let center" class="actions-cell">

                <button mat-icon-button color="primary" (click)="openEdit(center); $event.stopPropagation()">
                    <mat-icon>edit</mat-icon>
                </button>

                <button mat-icon-button color="warn" (click)="openDelete(center); $event.stopPropagation()">
                    <mat-icon>delete</mat-icon>
                </button>

            </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns" class="clickable-row" (click)="goToDetails(row)">
        </tr>
    </table>

    <!-- ================= Footer ================= -->
    <mat-paginator [pageSize]="5" [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons>
    </mat-paginator>

</div>