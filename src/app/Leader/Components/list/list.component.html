<div class="leader-table-wrapper">
  <!-- ================= Header ================= -->
  <div class="table-header">
    <h2 class="page-title">Leaders</h2>
    <div class="header-actions">
      <!-- Search -->
      <mat-form-field appearance="fill" class="search-field">
        <mat-icon matPrefix>search</mat-icon>
        <input matInput type="text" (keyup)="applyFilter($event)" placeholder="Search leader">
      </mat-form-field>
      <!-- Add Leader Button (optional) -->
      <button mat-raised-button color="primary" class="add-btn" (click)="goToCreate()">
        <mat-icon>add</mat-icon>
        <span>Add Leader</span>
      </button>
    </div>
  </div>

  <!-- ================= Skeleton Loader ================= -->
  <div class="skeleton" *ngIf="loading">
    <div class="row" *ngFor="let _ of [1,2,3,4]"></div>
  </div>

  <!-- ================= Table ================= -->
  <div class="table-scroll" *ngIf="!loading">
    <table mat-table matSort [dataSource]="dataSource" class="leader-table">
      <!-- Icon Column -->
      <ng-container matColumnDef="icon">
        <th mat-header-cell *matHeaderCellDef></th>
        <td mat-cell *matCellDef="let leader">
          <mat-icon class="person-icon">person</mat-icon>
        </td>
      </ng-container>

      <!-- Name Column -->
      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>اسم القيادة</th>
        <td mat-cell *matCellDef="let leader" class="name-cell">
          <span class="name-text">{{ leader.nameAr }}</span>
        </td>
      </ng-container>

      <!-- Actions Column -->
      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef>Actions</th>
        <td mat-cell *matCellDef="let leader" class="actions-cell">
          <div class="actions-wrapper">
            <button mat-icon-button class="more-btn" [matMenuTriggerFor]="actionsMenu" (click)="$event.stopPropagation()">
              <mat-icon>more_vert</mat-icon>
            </button>
            <mat-menu #actionsMenu="matMenu" class="actions-menu">
              <button mat-menu-item (click)="openEdit(leader); $event.stopPropagation()">
                <mat-icon class="edit-icon">edit</mat-icon>
                <span>Edit</span>
              </button>
              <button mat-menu-item (click)="openDetails(leader); $event.stopPropagation()">
                <mat-icon class="details-icon">info</mat-icon>
                <span>Details</span>
              </button>
              <button mat-menu-item (click)="openDelete(leader); $event.stopPropagation()">
                <mat-icon class="delete-icon">delete</mat-icon>
                <span>Delete</span>
              </button>
            </mat-menu>
          </div>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns" class="clickable-row"></tr>
    </table>
  </div>

  <!-- ================= Footer ================= -->
  <mat-paginator [pageSize]="5" [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons>
  </mat-paginator>

  <ng-template #noLeaders>
    <p>No leaders found.</p>
  </ng-template>
</div>
